// ğŸ”½ ç‹¬è‡ªãƒ‡ãƒ¼ã‚¿
var places = [
    // è‡ªå‹•è²©å£²æ©Ÿï¼ˆã‚·ãƒãƒ‹ãƒ : è‡ªè²©æ©Ÿï¼‰
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65265, lng: 135.59455 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65258, lng: 135.59430 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65270, lng: 135.59279 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65271, lng: 135.59166 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65272, lng: 135.59108 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65273, lng: 135.59096 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65274, lng: 135.59052 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65222, lng: 135.58974 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65132, lng: 135.59100 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65088, lng: 135.59059 },
    { names: ["è‡ªå‹•è²©å£²æ©Ÿ", "è‡ªè²©æ©Ÿ", "ã˜ã©ã†ã¯ã‚“ã°ã„ã", "ã˜ã¯ã‚“ã"], lat: 34.65074, lng: 135.59110 },

    // ã‚´ãƒŸç®±
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65265, lng: 135.59455 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65258, lng: 135.59430 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65270, lng: 135.59279 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65273, lng: 135.59096 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65274, lng: 135.59052 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65222, lng: 135.58974 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65153, lng: 135.58967 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65144, lng: 135.59060 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65126, lng: 135.59105 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65099, lng: 135.59156 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65101, lng: 135.59107 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65088, lng: 135.59059 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65074, lng: 135.59110 },
    { names: ["ã‚´ãƒŸç®±", "ã”ã¿ã°ã“"], lat: 34.65100, lng: 135.59169 },
];
var markers = []; // æ¤œç´¢æ™‚ã«ã ã‘ãƒãƒ¼ã‚«ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®é…åˆ—

/**
 * æ¤œç´¢ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸãƒˆãƒªã‚¬ãƒ¼
 * @param {string} keyword æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰
 * @returns æ¤œç´¢çµæœ
 */
function searchOnClick(keyword) {
    searchPlace(keyword);
    // --- ãƒ‡ãƒ¢ç”¨: ãƒ€ãƒŸãƒ¼æ¤œç´¢çµæœ ---
    const dummyResults = [
        "ãƒ©ãƒ¼ãƒ¡ãƒ³å±‹ Aï¼ˆé§…å‰ï¼‰",
        "ã‚«ãƒ•ã‚§ Bï¼ˆ2Fï¼‰",
        "å›³æ›¸é¤¨ Cï¼ˆå¸‚å½¹æ‰€æ¨ªï¼‰",
        "å…¬åœ’ Dï¼ˆä¸­å¤®åºƒå ´ï¼‰",
        "ã‚¹ãƒ¼ãƒ‘ãƒ¼ Eï¼ˆå•†åº—è¡—å†…ï¼‰",
    ];
    return dummyResults;
}

/**
 * ã‚«ãƒ¼ãƒ‰ãŒæŠ¼ã•ã‚ŒãŸéš›ã®ãƒˆãƒªã‚¬ãƒ¼
 * @param {string} value æŠ¼ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã®ä¸­èº«
 */
function cardOnClick(value) {
    console.log(value);
}

// ğŸ” å…¥åŠ›æ­£è¦åŒ–ï¼ˆå…¨è§’åŠè§’ãƒ»ã²ã‚‰ãŒãªã‚«ã‚¿ã‚«ãƒŠçµ±ä¸€ï¼‰
function normalize(str) {
    return str
        .toLowerCase()
        .normalize("NFKC") // å…¨è§’ â†’ åŠè§’
        .replace(/[ã-ã‚“]/g, s => String.fromCharCode(s.charCodeAt(0) + 0x60)); // ã²ã‚‰ãŒãªâ†’ã‚«ã‚¿ã‚«ãƒŠ
}

// ğŸ” æ¤œç´¢å‡¦ç†
function searchPlace(input) {
    var normInput = normalize(input);

    // æ—¢å­˜ãƒãƒ¼ã‚«ãƒ¼å‰Šé™¤
    markers.forEach(m => map.removeLayer(m));
    markers = [];

    var found = places.filter(p => p.names.some(n => normalize(n).includes(normInput)));

    if (found.length > 0) {
        found.forEach(f => {
            var m = L.marker([f.lat, f.lng]).addTo(map); // ğŸ‘ˆ Popupãªã—
            markers.push(m);
        });
        map.setView([found[0].lat, found[0].lng], 18);
    } else {
        alert("è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ");
    }
}